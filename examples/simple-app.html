<html>
  <head>
    <title>First Firestore Query</title>
  </head>

  <body>
    <!-- Load Firebase and Firestore -->
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-firestore.js"></script>

    <!-- Initialize Firebase -->
    <script src="https://how-to-firebase-tutorials.firebaseapp.com/__/firebase/init.js"></script>

    <script>
      async function getPeople() {
        // Data Structure
        // Collection: public
        //  Doc: write-your-first-query
        //    Collection: star-wars-people
        const db = firebase.firestore();

        // See Firebase docs: https://firebase.google.com/docs/firestore/query-data/get-data#get_a_document

        console.log(db);
        // Define collection ðŸ¤” hint: db.collection(...).doc(...).collection(...)
        const collection = db
          .collection("public")
          .doc("write-your-first-query")
          .collection("star-wars-people");

        const snapshot = await collection.get();

        return snapshot.docs.map(doc => ({ __id: doc.id, ...doc.data() }));
      }

      async function runQuery() {
        const people = await getPeople();
        console.table(people);
      }

      runQuery();
    </script>

    <h1>This page intentionally left blank</h1>
  </body>
</html>
